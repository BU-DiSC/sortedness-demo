<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Sortedness Demo</title>
	<!-- Bootswatch CSS based on Bootstrap -->
	<!-- Theme: http://bootswatch.com/flatly/ -->
	<link rel="stylesheet" href="css/bootstrap.min.css">
	<!-- Plugin CSS -->
	<link rel="stylesheet" href="css/bootstrap-slider.min.css">
	<!-- Custom CSS -->
	<link rel="stylesheet" href="css/styles.css">
	<link rel="stylesheet" href="css/tooltip.css">
	<!-- Google Font -->
	<link href="https://fonts.googleapis.com/css?family=Lato:300,400&display=swap" rel="stylesheet">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
	<!-- Google Material Icon-->
	<link href="https://fonts.googleapis.com/css2?family=Material+Icons" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css2?family=Material+Icons+Outlined" rel="stylesheet">
	<script src="https://cdn.plot.ly/plotly-2.35.2.min.js"></script>
	<script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
	<script src="js/packages/plotly.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jstat/1.9.4/jstat.min.js"></script>
	<script type="text/javascript" src="js/server/server.js"></script>
	<script type="text/javascript" src="js/server/update.js"></script>
	<script type="text/javascript" src="js/data.js"></script>
	<script type="text/javascript" src="js/algorithms/sware.js"></script>
	<script type="text/javascript" src="js/algorithms/quit.js"></script>
	<script type="text/javascript" src="js/helpers.js"></script>
	<script type="text/javascript" src="js/main.js"></script>
	<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
	<script type="text/javascript">
		google.charts.load('current', {'packages':['corechart']});
	</script>
</head>

<body>
	<!-- Header at the top -->
	<header id="page-top">
		<nav class="navbar navbar-expand-lg navbar-dark navbar-fixed-top bg-dark fixed-top">
			<div class="container">
				<a class="navbar-brand" href="#page-top">Sortedness<span class="sr-only">(current)</span></a>
				<button id="navbarToggle" class="navbar-toggler" type="button" data-toggle="collapse"
					data-target="#collapsable-nav" aria-controls="collapsable-nav" aria-expanded="false"
					aria-label="Toggle navigation">
					<span class="navbar-toggler-icon"></span>
				</button>

				<div id="collapsable-nav" class="collapse navbar-collapse" id="collapsable-nav">
					<ul class="nav navbar-nav ml-auto">
						<li class="nav-item">
							<a class="nav-link" href="#publication">Publications</a>
						</li>
						<li class="nav-item">
							<a class="nav-link" href="#authors">The Team</a>
						</li>
						<li class="nav-item">
							<a class="nav-link" href="#sponsors">Sponsors</a>
						</li>
					</ul>
				</div>
			</div>
		</nav>
	</header>

	<!-- Banner on the left side-->
	<div class="fixed">
		<div class="rcorners-1" style="background-color:8288B4">
			<a href="research.html"><span class="rcorners-click"></span></a>
			<div class="rcorners-text-1"><a href="index.html" style="text-decoration:none; color: rgba(255, 255, 255, 0.88)">Home</a></div>
		</div>
		<div class="rcorners-2" style="background-color:8288B4">
			<a href="research.html"><span class="rcorners-click"></span></a>
			<div class="rcorners-text-2"><a href="background.html" style="text-decoration:none; color: rgba(255, 255, 255, 0.88)">Background</a></div>
		</div>
		<div class="rcorners-3" style="background-color:8288B4">
			<a href="research.html#problem"><span class="rcorners-click"></span></a>
			<div class="rcorners-text-3"><a href="research.html" style="text-decoration:none; color: rgba(255, 255, 255, 0.88)">Sortedness&nbsp;</a></div>
			<!-- <img class="img-responsive img-left" src="./img/animation.gif" alt="" width="40px" /> -->
		</div>
	</div>

	<!-- Main section -->
	<section id="research" class="research-section">
		<!-- Title -->
		<section id="problem" style="padding-top:0px">
			<div class="container">
				<div class="row section-title">
					<h2> Sortedness </h2>
				</div>
			</div>
		</section>
		<h4 class="text-center workload-title">Workload</h4>

		<!-- Input fields for the parameters -->
<div id="cmp-conf-row" class="parameter-row">
    <!-- Div of N -->
    <div class="parameter-container">
        <div class="input-group input-group-sm mb-2">
            <div class="input-group-prepend">
                <label class="input-group-text" for="cmp-select-N">
                    <i class="fas"></i>N (# of elements)
                </label>
            </div>
            <input type="number" id="cmp-select-N" class="cmp-input form-control" 
                   value="5000" min="20" max="10000" step="1" aria-label="#Entries">
        </div>
    </div>
    
    <!-- Div of K -->
    <div class="parameter-container">
        <div class="input-group input-group-sm mb-2">
            <div class="input-group-prepend">
                <label class="input-group-text" for="cmp-select-K">
                    <i class="fas"></i>K (% out-of-order)
                </label>
            </div>
            <input type="number" id="cmp-select-K" class="cmp-input form-control" 
                   value="20" min="0" max="100" aria-label="#Entries" onchange="update()">
        </div>
    </div>

    <!-- Div of L -->
    <div class="parameter-container">
        <div class="input-group input-group-sm mb-2">
            <div class="input-group-prepend">
                <label class="input-group-text" for="cmp-select-L">
                    <i class="fas"></i>L (% max out-of-orderness)
                </label>
            </div>
            <input type="number" id="cmp-select-L" class="cmp-input form-control" 
                   value="10" min="0" max="100" aria-label="#Entries" onchange="update()">
        </div>
    </div>
</div>

<h4 class="text-center workload-title">Sortedness Distribution</h4>

<div id="cmp-conf-row2" class="parameter-row">
	<!--Div of A-->
	<div class="parameter-container">
        <div class="input-group input-group-sm mb-2">
            <div class="input-group-prepend">
                <label class="input-group-text" for="cmp-select-A">
                    <i class="fas fa-chart-area"></i> <span class="specialChar">&alpha;</span> (alpha value)
                </label>
            </div>
            <input type="number" id="cmp-select-A" class="cmp-input form-control" 
                   value="0.3" min="0.1" max="1" step="0.1" aria-label="#Entries" onchange="update()">
        </div>
    </div>

    <!-- Div of B -->
    <div class="parameter-container">
        <div class="input-group input-group-sm mb-2">
            <div class="input-group-prepend">
                <label class="input-group-text" for="cmp-select-B">
                    <i class="fas fa-chart-line"></i> <span class="specialChar">&beta;</span> (beta value)
                </label>
            </div>
            <input type="number" id="cmp-select-B" class="cmp-input form-control" 
                   value="0.3" min="0.1" max="1" step="0.1" aria-label="#Entries" onchange="update()">
        </div>
    </div>
</div>

		<div id="cmp-conf-row4" class="parameter-row">
    		<div class="parameter-container">
        		<div class="d-flex justify-content-center">
            		<button onclick="visualize_workload()" type="button" class="btn btn-success">Visualize Workload</button>
        		</div>
    		</div>
		</div>
		<!-- Charts -->
		<div class="charts">
			<div class="row gx-0 hidden chart-column" id="chart-column">
				<!-- Chart 1 (default) -->
				<div class="col-6">
					<div class="container px-0">
						<div id="klCharts" class="center equal-height">
						</div>
					</div>
				</div>
				<!-- Chart 2 (inversions) -->
				<div class="col-6">
					<div class="container px-0">
						<div id = "inversionCharts" class="equal-height">
						</div>
					</div>
				</div>
			</div>
		</div>

		<!-- "Run" button -->
		<div class="row">
    		<div id="run-button-contain" class="col-md-11 run-button-container hidden">
        	<button onclick="run2_operations()" type="button" class="btn btn-success" id="runBtn">Run</button>
    		</div>
		</div>


		<!-- Dashed line -->
		<hr id="dashed-line" class="hidden" />
		
		<!-- Buttons -->
		<div id="buttons-container-wrapper" class="hidden">
			<div class="col text-center" id="buttons-container">
				<button id="stop-button" onclick="stop_button()" type="button" class="btn btn-info"><img src="./img/stop.png" alt="Stop"></button>					
				<button id="continue-button" onclick="continue_button()" type="button" class="btn btn-warning"><img src = "./img/continue.png" alt="Continue"></button>
				<button id="nextstep-button" onclick="nextstep_button()" type="button" class="btn btn-warning"><img src = "./img/nextstep.png" alt="Nextstep"></button>
				<button id="reset-button" onclick="reset_button()" type="button" class="btn btn-warning"><img src = "./img/reset.png" alt="Nextstep"></button>
			</div>
		</div>

		<div class="hidden" id="animations-div">
			<div class="container mt-5 d-flex animations-container">
				<!-- Areas for the tree and the buffer -->
				<div id="buffer-area" class="hidden container mt-5" style="flex-direction: column;">
					<!-- Area for the buffer -->
					<h4>Buffer</h4>
					<div class="buffer-container">
						<div class="auto overflow-x overflow-y container mt-5 buffer-content">
							<div class="section-labels-sware">
								<button class="btn btn-primary buffer-btn" id="buffer0"></button>
								<button class="btn btn-primary buffer-btn" id="buffer1"></button>
								<button class="btn btn-primary buffer-btn" id="buffer2"></button>
								<button class="btn btn-primary buffer-btn" id="buffer3"></button>
								<button class="btn btn-primary buffer-btn" id="buffer4"></button>
								<button class="btn btn-primary buffer-btn" id="buffer5"></button>
								<button class="btn btn-primary buffer-btn" id="buffer6"></button>
								<button class="btn btn-primary buffer-btn" id="buffer7"></button>
								<button class="btn btn-primary buffer-btn" id="buffer8"></button>
								<button class="btn btn-primary buffer-btn" id="buffer9"></button>
							</div>
						</div>
					</div>						
					<!-- Area for the tree, step 3+ -->
					<div id="tree-area-step-3+" class="hidden">
						<h4>Tree</h4>
						<div class="tree-container">
							<!-- Small Circle on Top of the Triangle -->
							<div id="circle" class="circle"></div>
							
							<!-- Existing Triangle -->
							<div class="triangle"></div>
							
							<div class="dots">
								<span class="dot"></span>
								<span class="dot"></span>
								<span class="dot"></span>
							</div>
							<!-- Rectangles below the dots -->
							<div class="rectangles-sware">
								<div class="rectangle-sware"></div>
								<div class="rectangle-sware"></div>
								<div class="rectangle-sware"></div>
								<div class="smallerDots-sware">
									<span class="smallerDot-sware"></span>
									<span class="smallerDot-sware"></span>
									<span class="smallerDot-sware"></span>
								</div>
								<div class="rectangle-sware" id="last-tree"></div> 
							</div>
						</div>
					</div>
											
				</div>
				<!-- QuIT Part -->
				<div id="quit-area" class="hidden container mt-5" style="flex-direction: column;">
					<!-- Area for the buffer -->
					<h4>Insertions Tree</h4>
					<div class="buffer-container">
						<div class="auto overflow-x overflow-y container mt-5" style="position: relative;">
							<div class="section-labels-quit">
								<button class="btn btn-primary page-btn" id="page0"></button>
								<button class="btn btn-primary page-btn" id="page1"></button>
								<button class="btn btn-primary page-btn" id="page2"></button>
								<button class="btn btn-primary page-btn" id="page3"></button>
								<button class="btn btn-primary page-btn" id="page4"></button>
								<button class="btn btn-primary page-btn" id="page5"></button>
								<button class="btn btn-primary page-btn" id="page6"></button>
								<button class="btn btn-primary page-btn" id="page7"></button>
								<button class="btn btn-primary page-btn" id="page8"></button>
								<button class="btn btn-primary page-btn" id="page9"></button>
								<button class="btn btn-primary page-btn" id="page10"></button>
								<button class="btn btn-primary page-btn" id="page11"></button>
								<button class="btn btn-primary page-btn" id="page12"></button>
								<button class="btn btn-primary page-btn" id="page13"></button>
								<button class="btn btn-primary page-btn" style="border-right: none" id="page14"></button>
							</div>
						</div>
					</div>		
					
					<!-- QuIT Tree-->
					<div id="tree-quit">
						<h4>QuIT Tree</h4>
						<div class="tree-container">
							
							<!-- Existing Triangle
							<div class="triangle"></div> -->
							<div class="quit-levels">
								<div class="quit-level" id="quit-level-1"></div>
								<div class="quit-level" id="quit-level-2"></div>
								<div class="quit-level" id="quit-level-3"></div>
								<div class="quit-level" id="quit-level-4"></div>
							</div>

							
							<div class="dots">
								<span class="dot"></span>
								<span class="dot"></span>
								<span class="dot"></span>
							</div>
							<!-- Rectangles below the dots -->
							<div class="rectangles-quit">
								<div class="rectangle-quit"></div>
								<div class="rectangle-quit"></div>
								<div class="rectangle-quit"></div>
								<div class="rectangle-quit"></div>
								<div class="rectangle-quit"></div>
								<div class="rectangle-quit"></div>
								<div class="smallerDots-quit">
									<span class="smallerDot-quit"></span>
									<span class="smallerDot-quit"></span>
									<span class="smallerDot-quit"></span>
								</div>
								<div class="rectangle-quit" id="last-tree-quit"></div> 
							</div>

							<!-- pole arrow -->
							<div id="pole" class="arrow-up"></div>
						</div>
					</div>

				</div>
			</div>

			<div class="container mt-5 d-flex animations-container">
				<div id="quit-area" class="container mt-5" style="flex-direction: column;">
					<h4>lil</h4>
					<div class="tree-container">
						<div class="triangle"></div>
							
						<div class="dots">
							<span class="dot"></span>
							<span class="dot"></span>
							<span class="dot"></span>
						</div>

						<div class="rectangles-lil">
							<div class="rectangle-lil"></div>
							<div class="rectangle-lil"></div>
							<div class="rectangle-lil"></div>
							<div class="rectangle-lil"></div>
							<div class="rectangle-lil"></div>
							<div class="rectangle-lil"></div>
							<div class="smallerDots-lil">
								<span class="smallerDot-lil"></span>
								<span class="smallerDot-lil"></span>
								<span class="smallerDot-lil"></span>
							</div>
							<div class="rectangle-lil"></div>
						</div>

					</div>
				</div>
				<div id="quit-area" class="container mt-5" style="flex-direction: column;">
					<h4>pole</h4>
					<div class="tree-container">
					</div>
				</div>
				
			</div>

		</div>

		<!-- Results Panel -->
		<div id="results-panel" class="hidden container results-panel">
			<div id="cost-result" class="container">
				<!-- SWARE and QuIT Titles -->
				<div class="row">
					<div class="col text-right">
						<span class="sware-quit-title cost uncertain">SWARE</span>
					</div>
					<div class="col-2 text-center">
						<span class="metric-title"></span>
					</div>
					<div class="col text-left">
						<span class="sware-quit-title cost uncertain">QuIT</span>
					</div>
				</div>	

				<!-- #Sorts -->
				<div class="row">
					<div class="col text-right">
						<span id="sware-sorts" class="cost uncertain" data-toggle="tooltip" data-placement="right">0</span>
					</div>
					<div class="col-2 text-center">
						<span class="metric-title" data-toggle="tooltip" data-placement="left"
							title="The number of times a requested page is not found in the bufferpool.">#Sorts</span>
					</div>
					<div class="col text-left">
						<span class="cost uncertain"></span>
					</div>
				</div>

				<!-- #Buffer Flushes -->
				<div class="row">
					<div class="col text-right">
						<span id="sware-flushes" class="cost uncertain" data-toggle="tooltip" data-placement="right">0</span>
					</div>
					<div class="col-2 text-center">
						<span class="metric-title" data-toggle="tooltip" data-placement="left"
							title="The number of times a requested page is in the bufferpool.">#Buffer Flushes</span>
					</div>
					<div class="col text-left">
						<span class="cost uncertain"></span>
					</div>
				</div>

				<!-- #Average Pages per Flush -->
				<div class="row">
					<div class="col text-right">
						<span id="sware-average-pages-per-flush" class="cost uncertain" data-toggle="tooltip" data-placement="right">0</span>
					</div>
					<div class="col-2 text-center">
						<span class="metric-title">#Average Pages per Flush</span>
					</div>
					<div class="col text-left">
						<span class="cost uncertain"></span>
					</div>
				</div>

				<!-- #Bulk Loads / Fast Inserts -->
				<div class="row">
					<div class="col text-right">
						<span id="sware-bulk-loads" class="cost uncertain" data-toggle="tooltip" data-placement="right">0</span>
					</div>
					<div class="col-2 text-center">
						<span class="metric-title" data-toggle="tooltip" data-placement="left"
							title="The number of dirty pages written.">#Bulk Loads / Fast Inserts</span>
					</div>
					<div class="col text-left">
						<span id="quit-fast-inserts" class="cost uncertain">0</span>
					</div>
				</div>

				<!-- #Top Inserts -->
				<div class="row">
					<div class="col text-right">
						<span id="sware-top-inserts" class="cost uncertain" data-toggle="tooltip" data-placement="right">0</span>
					</div>
					<div class="col-2 text-center">
						<span class="metric-title" data-toggle="tooltip" data-placement="left"
							title="The number of pages processed from a workload.">#Top Inserts</span>
					</div>
					<div class="col text-left">
						<span id="quit-top-inserts" class="cost uncertain">0</span>
					</div>
				</div>

				<!-- #Pole Resets -->
				<div class="row">
					<div class="col text-right">
						<span class="cost uncertain" data-toggle="tooltip" data-placement="right"></span>
					</div>
					<div class="col-2 text-center">
						<span class="metric-title">#Pole Resets</span>
					</div>
					<div class="col text-left">
						<span id="quit-pole-resets" class="cost uncertain">0</span>
					</div>
				</div>

				<!-- lil and pole Titles -->
				<div class="row lil-pole-title-row">
					<div class="col text-right">
						<span class="sware-quit-title cost uncertain">lil</span>
					</div>
					<div class="col-2 text-center">
						<span class="metric-title"></span>
					</div>
					<div class="col text-left">
						<span class="sware-quit-title cost uncertain">pole</span>
					</div>
				</div>	
			</div>
		</div>

		<!-- Plots -->
		<div id="plots" class="hidden">
			<!-- Color Legends -->
			<hr>
			<div id="color-legends" class="row justify-content-center color-legends">
				<div class="col-lg-3 d-flex align-items-center justify-content-center">
					<div class="d-flex align-items-center">
						<div class="color-legend-box color-legend-sware"></div>
						<div id="lsm-cmpct-pp-1-legend">
							<b>SWARE</b>
						</div>
					</div>
				</div>
				<div class="col-lg-3 d-flex align-items-center justify-content-center">
					<div class="d-flex align-items-center">
						<div class="color-legend-box color-legend-quit"></div>
						<div id="lsm-cmpct-pp-2-legend">
							<b>QuIT</b>
						</div>
					</div>
				</div>
			</div>
			
			<!-- Charts -->
			<div class="row no-gutters">
				<div class="col-lg-4">
					<div id="sware-sorts-chart" class="chart-container"></div>
				</div>
				<div class="col-lg-4">
					<div id="sware-flushes-chart" class="chart-container"></div>
				</div>
				<div class="col-lg-4">
					<div id="sware-average-pages-per-flush-chart" class="chart-container"></div>
				</div>
			</div>
			<div class="row no-gutters">
				<div class="col-lg-4">
					<div id="sware-bulk-loads/quit-fast-inserts-chart" class="chart-container"></div>
				</div>
				<div class="col-lg-4">
					<div id="sware-top-inserts/quit-top-inserts-chart" class="chart-container"></div>
				</div>
				<div class="col-lg-4">
					<div id="quit-pole-resets-chart" class="chart-container"></div>
				</div>
			</div>
		</div>
	</section>

</body>
</html>